{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-17T00:38:02.221Z",
  "summary": "Backend registration now returns distinct error variants for not-a-guest, username taken, and email taken; frontend adds centralized auth messages and a mapper to convert backend registration errors into accurate user-facing text, with AuthProvider importing the mapper and LoginScreen displaying AuthProvider-provided error messages.",
  "missing_requirements": [],
  "hallucinated_features": [
    {
      "description": "Login flow now verifies the calling principal matches the registered principal (potential authentication/security model change).",
      "reason": "BuildRequest focuses on registration error correctness and explicitly lists changing the authentication/security model as a non-goal; the diff shows added principal-matching enforcement in login.",
      "evidence": [
        "backend/main.mo (login): `// Verify the caller matches the registered principal` and `if (caller != credentials.principal) { return null; };`"
      ]
    },
    {
      "description": "Added/expanded non-registration auth messaging and behavior (e.g., 'Sign In is temporarily unavailable' message and a sign-in availability feature flag).",
      "reason": "Not requested by REQ-1/REQ-2, which only address registration error disambiguation and mapping to correct messages.",
      "evidence": [
        "frontend/src/auth/authMessages.ts: `LOGIN_NOT_AVAILABLE` message",
        "frontend/src/pages/LoginScreen.tsx: `const SIGN_IN_AVAILABLE = true;`"
      ]
    },
    {
      "description": "Added defensive runtime check/error handling for missing `validateSession` method on the backend actor.",
      "reason": "Not requested; REQ-2 only requires correct registration error mapping and centralized messages usage.",
      "evidence": [
        "frontend/src/auth/AuthProvider.tsx: `if (typeof actor.validateSession !== 'function') { ... }`"
      ]
    }
  ],
  "confidence": 0.72,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/auth/AuthProvider.tsx",
    "frontend/src/auth/authMessages.ts",
    "frontend/src/pages/LoginScreen.tsx",
    "project_state.json"
  ]
}