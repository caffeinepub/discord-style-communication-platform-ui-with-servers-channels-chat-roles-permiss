{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Caffeine Chat — Friendly handling for re-registration attempts in Sign Up flow",
  "requirements": [
    {
      "id": "REQ-2",
      "summary": "Normalize re-registration traps/null responses into the existing friendly 'already registered' UI message during Sign Up.",
      "acceptanceCriteria": [
        "When the backend indicates a re-registration attempt by an already-registered user (via `null` return or an error message containing `Unauthorized: Already registered users cannot register again`), the UI displays `AUTH_MESSAGES.ALREADY_REGISTERED`.",
        "The raw text `Unauthorized: Already registered users cannot register again` is not shown to the user anywhere in the Sign Up flow."
      ],
      "file_operations": [
        {
          "path": "frontend/src/auth/AuthProvider.tsx",
          "operation": "modify",
          "description": "Harden registration error normalization: ensure any thrown error message containing `Unauthorized: Already registered users cannot register again` maps to `AUTH_MESSAGES.ALREADY_REGISTERED`, alongside the existing `null`-response handling. Use the selected `authorization` component’s frontend error-handling guidance to gracefully convert backend traps to user-friendly messages. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/LoginScreen.tsx",
          "operation": "modify",
          "description": "Add a final defensive mapping in the Sign Up catch-handler to replace any received raw backend trap text containing `Unauthorized: Already registered users cannot register again` with `AUTH_MESSAGES.ALREADY_REGISTERED`, ensuring the raw text is never displayed in the UI."
        }
      ]
    }
  ]
}